<!-- courses.ejs -->
<!DOCTYPE html>
<html>

  <title>Create topic</title>
  <%- include('partials/header') %>

<body>
  <!-- Navigation -->
  <%- include('partials/clientNav') %>
  

  <p class="path"> Home /<a href="/course/created"> courses</a> /<span style="color: gray;"> course</span> </p>

  <div class="user-courses-container">
    <div class="user-column">
    
    <p class="page-small-title"><b>Create Course</b></p>
  <form id="topicForm" action="/topics/create/<%=courseId%>" method="POST" class="d-flex flex-column  px-3">
    <div class="row">
      <div class="col-md-12">
        <div class="form-group mb-2">
          <input type="text" id="topicTitle" name="topicTitle" placeholder="Title" class="form-control">
          <input type="hidden" name="materialTitle" value="none">
        </div>
      </div>
  
    </div>
    
    <div class="form-group mb-2">
      <textarea id="topicDesc" placeholder="Lesson Description" cols="40" rows="5" name="topicDesc" class="form-control"></textarea>
    </div>
 
  
    <div class="row">
      <div class="col-md-12">
        <div class="form-group mb-2">
      <label for="category">Category:</label> 
      <select id="category" name="videoSource" class="form-control">
        <% videoSource.forEach((source) => { %>
          <option value="<%= source %>"><%= source %></option>
        <% }) %>
      </select>
    </div>
    </div>
    </div>
    
    <div class="row">
      <div class="col-md-12">
        <div class="form-group mb-2">
          <input type="text"id="materialVideo" name="materialVideo" placeholder="Course Video URL" class="form-control">
        
          <input type="hidden" id="materialVideo" name="courseId" value="<%=courseId %>">
        </div>
      </div>
      
    </div>
    <div class="row">
    <div class="col-md-12">
      <div class="form-group mb-2">
        <textarea id="materialContent" placeholder="Lesson content" name="materialContent" rows="5" cols="30" class="form-control"></textarea>
      </div>
    </div>
    </div>

    <button type="submit" class="trans-btn ">Create Course</button>
  </form>
  <p id="error"></p>
  <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
    <div class="errors">
      <% errors.forEach(function (error) { %>
        <p class="error-message"><%= error.msg %></p>
      <% }) %>
    </div>
  <% } %>
     
    </div>
    <div class="stats-column">
     
      <h3 class="display-9"><b>Course requirements</b> </h3>
      <br>
      <div class="stats">
        <div class="stats-item">
          <i class="fa fa-laptop"></i>
          <p>Courses: 2%> </p>
        </div>
        <div class="stats-item">
          <i class="fa fa-check-circle"></i>
          <p>Completed Courses: 45</p>
        </div>
        <div class="stats-item">
          <i class="fa fa-hourglass-half"></i>
          <p>In Progress: 45</p>
        </div>
      
      </div>
    </div>
  </div>

  <!-- =========================================================== -->


   <a href="/course/course-topics/<%=courseId %>"><button>Back</button></a>
    <% if (typeof error !== 'undefined') { %>
      <p><strong>Error:</strong> <%= error %></p>
    <% } %>

    <form id="topicForm" action="/topics/create/<%=courseId%>" method="POST">
      <label for="topicTitle">Topic Title:</label>
      <input type="text" id="topicTitle" name="topicTitle">
      <input type="hidden" name="materialTitle" value="none">
      <label for="topicDesc">Topic Description:</label>
      <textarea  id="topicDesc" cols="50" rows="10" name="topicDesc"></textarea>

      <label for="materialContent">Material Content:</label>  
      <textarea id="materialContent" cols="50" rows="10" name="materialContent" ></textarea><br>

      <label>Video Source</label>  
      <select id="category" name="videoSource">
        <% videoSource.forEach((source) => { %>
          <option value="<%= source %>"><%= source %></option>
        <% }) %>
      </select>
      <label for="materialVideo">Video Link:</label>
      <input type="text" id="materialVideo" name="materialVideo">
      <input type="hidden" id="materialVideo" name="courseId" value="<%=courseId %>">
      <button type="submit">Create</button>
    </form>
      <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
        <div class="errors">
          <% errors.forEach(function (error) { %>
            <p class="error-message"><%= error.msg %></p>
          <% }) %>
        </div>
      <% } %>
      <%- include('partials/footer') %>
  </body>
  
  <script>
    $(document).ready(function() {
      $('#topicForm').submit(function(event) {
        event.preventDefault();
  
        // Clear previous error messages
        $('.error-message').remove();
  
        // Perform validation
        var isValid = true;
  
        var fields = [
          { name: 'topicTitle', label: 'Topic Title' },
          { name: 'topicDesc', label: 'Topic Description' },
          { name: 'materialContent', label: 'Material Content' },
          { name: 'materialVideo', label: 'Material Video URL' }
        ];
  
        fields.forEach(function(field) {
          var input = $('#' + field.name);
          var value = input.val().trim();
  
          if (value === '') {
            input.after('<p class="error-message">Please enter ' + field.label + '.</p>');
            isValid = false;
          }
        });
  
        if (isValid) {
          this.submit();
        }
      });
    });
  </script>
   <%- include('partials/footer') %>
</html>
